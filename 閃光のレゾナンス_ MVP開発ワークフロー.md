# 閃光のレゾナンス: MVP開発ワークフロー

このワークフローは、「閃光のレゾナンス」のコアとなる「高速オートバトルとリアルタイム閃き」を実装するためのステップバイステップの指示書です。

## フェーズ 1: 環境構築とプロジェクト初期化

| ステップ | タスク | 目的 |
| :--- | :--- | :--- |
| **1.1** | **プロジェクト初期化** | React + Vite + TypeScriptのプロジェクトをセットアップ。 |
| **1.2** | **Docker環境構築** | `docker-compose.yml`を作成し、フロントエンド（Node.js）、バックエンド（Node.js/Express）、TiDB（MySQL互換）の3コンテナ構成を定義。 |
| **1.3** | **TiDBスキーマ定義** | キャラクター、技、ルーンの基本テーブルスキーマを定義し、初期データを投入。 |
| **1.4** | **PixiJS導入** | フロントエンドプロジェクトにPixiJSを導入し、キャンバスの初期化コードを実装。 |

## フェーズ 2: UI/UXとゲームループの実装

| ステップ | タスク | 目的 |
| :--- | :--- | :--- |
| **2.1** | **縦画面UI実装** | 縦画面固定のCSSを適用し、画面下部に巨大な「進む」ボタンを配置。 |
| **2.2** | **探索ロジック** | 「進む」ボタンのタップイベントを実装。タップごとにフロア階層を更新し、一定確率でバトルフラグを立てる。 |
| **2.3** | **バトル画面構成** | PixiJSキャンバス内に、敵エリア、味方エリア、ログエリアの基本レイアウトを実装。 |
| **2.4** | **高速オートバトル** | バトルフラグが立った際、キャラクターの行動を自動で計算し、結果をログに出力するコアロジックを実装。**1バトル数秒**で完了させること。 |

## フェーズ 3: コア機能（閃き）の実装

| ステップ | タスク | 目的 |
| :--- | :--- | :--- |
| **3.1** | **閃き判定ロジック** | オートバトル中に、攻撃ごとに5%の確率で「閃き」が発生する判定ロジックを実装。 |
| **3.2** | **ヒットストップ演出** | 閃き発生時、ゲームの進行を0.2秒間停止させるロジックを実装。 |
| **3.3** | **カットイン・エフェクト** | 閃き発生時、PixiJSを用いて画面全体にネオンカラーの閃光エフェクトとカットイン画像をオーバーレイ表示。 |
| **3.4** | **技の習得とログ** | 閃き発生後、キャラクターの技リストに新しい技を追加し、ログに習得メッセージを強調表示する。 |

## フェーズ 4: 大連携と無限派生の実装

| ステップ | タスク | 目的 |
| :--- | :--- | :--- |
| **4.1** | **多人数連携ロジック** | 控えメンバー（最大10名）が自動で追撃に参加する「大連携」のコアロジックを実装。 |
| **4.2** | **指数関数的ダメージ計算** | 連携数に応じてダメージが跳ね上がる計算式を実装。 |
| **4.3** | **無限派生ツリーの実装** | 技から技が閃く派生ツリー構造をデータベースとロジックに組み込む。 |
| **4.4** | **連携専用技の閃き** | 5連携以上で発生する特別な閃き演出と習得ロジックを実装。 |
| **4.5** | **超・爽快感演出** | 連携中のBGM加速、画面シェイク、インフレする特大ダメージ数字を実装。 |